<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title></title>
	<meta charset="UTF-8">
	<meta http-equiv="Content-type" content="text/html; charset=UTF-8">
    <style type="text/css">
/*<![CDATA[*/
    :link { color: #0563C1 }
    :visited { color: #954F72 }
    p.cleanuphtml-5 {margin-bottom:8.0pt;line-height:80%}
    b.cleanuphtml-4 {font-style: italic}
    p.cleanuphtml-3 {font-weight: bold}
    p.cleanuphtml-2 {text-align: center}
    a.cleanuphtml-1 {font-weight: bold}
    /*]]>*/
    </style>

  <!-- Clean HTML generated by http://www.cleanuphtml.com/ -->
	<meta name="Generator" content="Cleanup HTML"></head>
  <body>

  <div class="panel-group" id="accordion">

    <div class="panel panel-default">
      <div class="panel-heading"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse1">Microc&oacute;digo en WepSIM</a></h4></div>
      <div id="collapse1" class="panel-collapse collapse in">
        <div class="panel-body" style="height:65vh; width: inherit; overflow-y: scroll;">

	      <p>
	      </p>
	      <p>
	        El microc&oacute;digo se carga a trav&eacute;s de un fichero de texto que tiene tres secciones:
	      </p>
	      <p>
	        1.    Lista de microprogramas
	      </p>
	      <p>
	        2.    Nombrado de registros
	      </p>
	      <p>
	        3.    Pseudo-instrucciones
	      </p>
	      <p>
	        La lista de microprogramas comienza con el c&oacute;digo del <i>fetch</i>.<br />
	        Un ejemplo de microprograma de <b>fetch</b> b&aacute;sico ser&iacute;a:
	      </p>
	      <p>
	        fetch
	      </p>
	      <p>
	        {
	      </p>
	      <p>
	                fetch:    (T2, C0=1),
	      </p>
	      <p>
	                             (Ta, Td, R, BW=11, C1),
	      </p>
	      <p>
	                             (M2, C2, T1, C3),
	      </p>
	      <p>
	                             (A0, B=0, C=0000)
	      </p>
	      <p>
	        }
	      </p>
	      <p class="cleanuphtml-2">
	        <a class="cleanuphtml-1" name="_Toc438322900">Figura</a> <b>11</b> <b>Ejemplo de descripci&oacute;n para</b> <b>fetch</b>
	      </p>
	      <p>
	        Las se&nacute;ales de control situadas entre los par&eacute;ntesis ( y ) se corresponden con las se&nacute;ales a activar en un ciclo de reloj. As&iacute; el fetch necesita cuatro ciclos de reloj, el &uacute;ltimo se
	        corresponde con la decodificaci&oacute;n (incluida en dentro del fetch).
	      </p>
	      <p>
	        A continuaci&oacute;n se encuentran el resto de microprogramas asociados a cada instrucci&oacute;n. Cada microprograma sigue el siguiente formato:
	      </p>
	      <p>
	        inst1 campo1 campo2 campo3
	      </p>
	      <p>
	        {
	      </p>
	      <p>
	                    co=000000,
	      </p>
	      <p>
	                    nwords=1,
	      </p>
	      <p>
	                    campo1=reg(25,21),
	      </p>
	      <p>
	                    campo2=reg(20,16),
	      </p>
	      <p>
	                    campo3=reg(15,11),
	      </p>
	      <p>
	                    {
	      </p>
	      <p>
	                           (Cop=1001, SelP=11, C7, T6, LE,
	      </p>
	      <p>
	                             SelA=10100, SelB=01111, SelE=10111,
	      </p>
	      <p>
	                             A0=1, B=1, C=0)
	      </p>
	      <p>
	                    }
	      </p>
	      <p>
	        }
	      </p>
	      <p class="cleanuphtml-2">
	        <a class="cleanuphtml-1" name="_Toc438322901">Figura</a> <b>12</b> <b>Ejemplo de formato de descripci&oacute;n de una instrucci&oacute;n</b>
	      </p>
	      <p>
	         
	      </p>
	      <p>
	        Donde la primera l&iacute;nea describe el nombre de la instrucci&oacute;n (inst1) y los par&aacute;metros que tiene (registros, valores inmediatos, etc.). A continuaci&oacute;n se abre un bloque con llaves para
	        describir dicha instrucci&oacute;n.
	      </p>
	      <p>
	        El primer campo del ejemplo mostrado (co) indica los 6 bits que identifica un&iacute;vocamente la instrucci&oacute;n. Esto no es del todo cierto para las instrucciones aritm&eacute;tico-l&oacute;gicas puesto que es
	        posible compartir el mismo c&oacute;digo de operaci&oacute;n y seg&uacute;n el valor del campo cop diferenciarse. Un ejemplo de este caso ser&iacute;a:
	      </p>
	      <p>
	         
	      </p>
	      <p>
	        inst1 campo1 campo2 campo3
	      </p>
	      <p>
	        {
	      </p>
	      <p>
	                    co=000000,
	      </p>
	      <p class="cleanuphtml-3">
	                    cop=0000,
	      </p>
	      <p>
	                    nwords=1,
	      </p>
	      <p>
	                    campo1=reg(25,21),
	      </p>
	      <p>
	                    campo2=reg(20,16),
	      </p>
	      <p>
	                    campo3=reg(15,11),
	      </p>
	      <p>
	                    {
	      </p>
	      <p>
	                           (Cop=1001, SelP=11, C7, T6, LE,
	      </p>
	      <p>
	                             SelA=10100, SelB=01111, SelE=10111,
	      </p>
	      <p>
	                             A0=1, B=1, C=0)
	      </p>
	      <p>
	                    }
	      </p>
	      <p>
	        }
	      </p>
	      <p class="cleanuphtml-2">
	        <a class="cleanuphtml-1" name="_Toc438322902">Figura</a> <b>13</b> <b>Detalle en la descripci&oacute;n de una instrucci&oacute;n: campo cop</b>
	      </p>
	      <p>
	        <br />
	        Los siguientes campos indican para cada uno de los par&aacute;metros qu&eacute; tipo es (registro, inmediato o direcci&oacute;n) as&iacute; como el bit de inicio y final entre los cuales est&aacute; el valor de dicho
	        par&aacute;metro.
	      </p>
	      <p>
	        El tipo de par&aacute;metro se indica con:
	      </p>
	      <p>
	        ·       parametro1 = reg(bit-inicio, bit-final): para un registro.
	      </p>
	      <p>
	        ·       parametro1 = inm(bit-inicio, bit-final): para un valor inmediato.
	      </p>
	      <p>
	        ·       parametro1 = addr(bit-inicio, bit-final)rel: para una direcci&oacute;n relativa.
	      </p>
	      <p>
	        ·       parametro1 = addr(bit-inicio, bit-final)abs: para una direcci&oacute;n absoluta.
	      </p>
	      <p>
	        A continuaci&oacute;n se abre un bloque donde se indicar&aacute; el microprograma correspondiente a la instrucci&oacute;n. Las se&nacute;ales de cada ciclo est&aacute;n entre par&eacute;ntesis y se separan dichos ciclos por coma. Si
	        solo hay un ciclo no es necesario la coma. Dentro de los par&eacute;ntesis se indicar&aacute;n las se&nacute;ales y el valor correspondiente. Si es una se&nacute;al de un bit, con solo poner el nombre de la se&nacute;al se
	        entender&aacute; que su valor es uno. El valor de la se&nacute;al se ha de indicar en binario, usando tantos bits como tenga asociado la se&nacute;al. Las se&nacute;ales y su valor correspondientes se separan usando una
	        coma.
	      </p>
	      <p>
	        Para el nombrado de registros se precisa indicar la etiqueta que se usar&aacute; para cada uno de los 32 registros del banco de registros. Un ejemplo de esta secci&oacute;n es:<br />
	        <br />
	      </p>
	      <p>
	        registers
	      </p>
	      <p>
	        {
	      </p>
	      <p>
	                  0=$zero,
	      </p>
	      <p>
	                  1=$at,
	      </p>
	      <p>
	                  2=$v0,
	      </p>
	      <p>
	                  3=$v1,
	      </p>
	      <p>
	                  4=$a0,
	      </p>
	      <p>
	                  5=$a1,
	      </p>
	      <p>
	                   6=$a2,
	      </p>
	      <p>
	                   7=$a3,
	      </p>
	      <p>
	                  .
	      </p>
	      <p>
	                  .
	      </p>
	      <p>
	                  .
	      </p>
	      <p>
	                  24=$t8,        
	      </p>
	      <p>
	                  25=$t9,
	      </p>
	      <p>
	                  26=$k0,
	      </p>
	      <p>
	                  27=$k1,
	      </p>
	      <p>
	                  28=$gp,
	      </p>
	      <p>
	                  29=$sp (stack_pointer),
	      </p>
	      <p>
	                  30=$fp,
	      </p>
	      <p>
	                  31=$ra
	      </p>
	      <p>
	        }
	      </p>
	      <p class="cleanuphtml-2">
	        <a class="cleanuphtml-1" name="_Toc438322903">Figura</a> <b>14</b> <b>Ejemplo de nombrado de registros</b>
	      </p>
	      <p>
	        <br />
	        En la que se indican los nombres usados en la arquitectura MIPS32. En este ejemplo el registro 29 etiquetado con $sp tiene el atributo "(stack_pointer)" para indicar que ser&aacute; usado como
	        puntero de pila.
	      </p>
	      <p>
	         
	      </p>
	      <p>
	        Por &uacute;ltimo es posible definir pseudo-instrucciones.<br />
	        Un ejemplo de pseudoinstrucci&oacute;n ser&iacute;a:
	      </p>
	      <p>
	        Pseudoinstructions<br />
	        {<br />
	                li reg num<br />
	                {<br />
	                       lui reg sel(31,16,num) ;<br />
	                       ori reg reg sel(15,0,num)<br />
	                 }<br />
	        }
	      </p>
	      <p>
	         
	      </p>
	      <p class="cleanuphtml-2">
	        <a class="cleanuphtml-1" name="_Toc438322904">Figura</a> <b>15</b> <b>Ejemplo de pseudo-instrucci&oacute;n (secci&oacute;n opcional)</b>
	      </p>
	      <p>
	        <br />
	        Donde el operador "sel(bit-inicio, bit-final, campo)" permite seleccionar una serie de bits de uno de los campos de la pseudo-instrucci&oacute;n.
	      </p>
	      <p>
	         
	      </p>

        </div>
      </div>
    </div>


    <div class="panel panel-default">
      <div class="panel-heading"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapse2">Gesti&oacute;n de microc&oacute;digo en WepSIM</a></h4></div>
      <div id="collapse2" class="panel-collapse collapse">
        <div class="panel-body" style="height:65vh; width: inherit; overflow-y: scroll;">

	      <p>
	        Un fichero de texto con las tres secciones antes comentadas (microc&oacute;digo, nombrado de registro y definici&oacute;n de pseudo-instrucciones) se carga en la pantalla de Firmware. Para acceder a dicha
	        pantalla se ha de ir al men&uacute; (parte superior derecha) e indicar la opci&oacute;n <i>Firmware</i> (v&eacute;ase la <b class="cleanuphtml-4">Figura 16</b>)
	      </p>
	      <p>
	         
	      </p>
	      <p>
	        <img width="80%" id="Imagen 1" src="sim_help_firmware_archivos/image001.jpg" alt="" name="Imagen 1" />
	      </p>
	      <p class="cleanuphtml-2">
	        <a name="_Ref434190846"></a><a name="_Toc438322905"></a><a class="cleanuphtml-1" name="_Ref434190877">Figura</a> <b>16</b> <b>Pantalla principal: opci&oacute;n de carga de firmware</b>
	      </p>
	      <p>
	        <br />
	        A continuaci&oacute;n aparecer&aacute; una pantalla con un cuadro de texto que permite indicar el <i>firmware</i> (las tres secciones antes comentadas). Es posible cargar un <i>firmware</i> existente
	        usando el bot&oacute;n "Load" de la barra inferior, modificar un <i>firmware</i> anteriormente cargado o salvar el firmware en curso con el bot&oacute;n "Save" de la barra inferior. Una vez se indique el
	        firmware es preciso hacer clic en el bot&oacute;n "µcompile" para pasar a binario y cargar en la memoria de control dicho firmware, como se muestra en la <b class="cleanuphtml-4">Figura 17</b>.
	      </p>
	      <p>
	        <img width="80%"               id="Imagen 2" src="sim_help_firmware_archivos/image002.jpg" alt="" name="Imagen 2" />
	      </p>
	      <p class="MsoNormal cleanuphtml-5"></p>
	      <table cellpadding="0" cellspacing="0" align="left">
	      </table> <br clear="all" />
	      <p class="cleanuphtml-2">
	        <a name="_Toc438322906"></a><a class="cleanuphtml-1" name="_Ref434191423">Figura</a> <b>17</b> <b>Pantalla firmware: cuadro de texto con firmware a cargar</b>
	      </p>
	      <p>
	        <br />
	        Una vez cargado el nuevo <i>firmware</i> correctamente aparecer&aacute; la pantalla mostrada en la <b class="cleanuphtml-4">Figura 18</b> en la que se muestra la memoria de control con los valores
	        que almacena.
	      </p>
	      <p>
	        <img width="80%"              id="Imagen 3" src="sim_help_firmware_archivos/image004.jpg" alt="" name="Imagen 3" />
	      </p>
	      <p class="cleanuphtml-2">
	        <a name="_Toc438322907"></a><a class="cleanuphtml-1" name="_Ref434191551">Figura</a> <b>18</b> <b>Pantalla firmware: firmware finalmente compilado</b>
	      </p>
	      <p>
	        <br />
	        El siguiente paso es la carga del programa ensamblador que permita probar este <i>firmware</i>, para ello podemos pulsar el bot&oacute;n "<i>Assembly</i>" de la barra inferior.
	      </p>
	      <p>
	         
	      </p>

        </div>
      </div>
    </div>

  </body>
</html>
